{"version":3,"file":"static/js/482.8a097b93.chunk.js","mappings":"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","sources":["utils/alerts.js","webpack://recursopasareladepago/./src/pages/Stripe/Stripe.module.scss?c26a","pages/Stripe/components/PaymentForm.jsx","components/Wrapper.jsx","pages/Stripe/components/ProductCard.jsx","services/axiosClient.js","services/paymentService.js","utils/http.js","pages/Stripe/Stripe.jsx"],"sourcesContent":["import Swal from 'sweetalert2';\n\nexport const createAlert = (type,title,message) => Swal.fire({\n    icon:type,\n    title,\n    text:message,\n    timer:3000,\n    showConfirmButton:false\n})\n\nexport const createAlertWithCallback = (type,title,message,callback) => Swal.fire({\n    icon:type,\n    title,\n    text:message,\n    timer:3000,\n    showConfirmButton:false\n}).then(result=>{\n    callback()\n})","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Stripe_container__bO9Q8\",\"highlighted\":\"Stripe_highlighted__ViBRC\",\"title\":\"Stripe_title__msbud\",\"productsContainer\":\"Stripe_productsContainer__G2SNT\",\"productCard\":\"Stripe_productCard__lHCTa\",\"genericButton\":\"Stripe_genericButton__rT8+m\",\"buttonPanel\":\"Stripe_buttonPanel__x-qaj\"};","// @ts-nocheck\nimport { PaymentElement, useElements, useStripe } from '@stripe/react-stripe-js'\nimport { useEffect } from 'react'\nimport { createAlert, createAlertWithCallback } from '../../../utils/alerts'\n\nimport styles from '../Stripe.module.scss'\nconst PaymentForm = () => {\n    const stripe = useStripe()\n    const elements = useElements()\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        const { error, paymentIntent } = await stripe.confirmPayment({\n            elements,\n            redirect: 'if_required'\n        })\n        if (!error) {\n            createAlertWithCallback('success', '¡Pago completado!', \"El pago ha sido procesado con éxito\", () => window.location.replace('/'))\n        } else {\n            console.log(error)\n            createAlert('error', 'Error al procesar el pago', error.message)\n        }\n    }\n    return <>\n        <form>\n            <PaymentElement />\n            <div className={styles.buttonPanel}>\n                <button className={styles.genericButton} onClick={handleSubmit}>Pagar</button>\n            </div>\n        </form>\n    </>\n}\nexport default PaymentForm","import React from 'react';\n\nconst Wrapper = ({hidden, children}) =>{\n    if(hidden) return null;\n    return children;\n}\n\nexport default Wrapper;","\nimport styles from '../Stripe.module.scss'\nconst ProductCard = ({ product, setCurrentProduct}) => {\n    return (<>\n        <div className={styles.productCard} onClick={()=>setCurrentProduct(product.id)}>\n            <p>{product.name}</p>\n            <p>{product.price}</p>\n        </div>\n    </>)\n}\n\nexport default ProductCard;","import axios from 'axios';\n\nexport default class AxiosClient {\n    \n    makeGetRequest = ({url,config,callbackSuccess,callbackError}) =>{\n        axios.get(url,config)\n        .then(callbackSuccess)\n        .catch(callbackError)\n    }\n    \n    makePostRequest = ({url,body,config,callbackSuccess,callbackError}) =>{\n        axios.post(url,body,config)\n        .then(callbackSuccess)\n        .catch(callbackError)\n    }\n\n    makePutRequest = ({url,body,config,callbackSuccess,callbackError}) =>{\n        axios.put(url,body,config)\n        .then(callbackSuccess)\n        .catch(callbackError)\n    }\n\n    makeDeleteRequest = ({url,config,callbackSuccess,callbackError}) =>{\n        axios.delete(url,config)\n        .then(callbackSuccess)\n        .catch(callbackError)\n    }\n}","import { getHeaders } from \"../utils/http\"\nimport AxiosClient from \"./axiosClient\"\n\nconst { REACT_APP_BASE_URL, REACT_APP_PAYMENT_ENDPOINT } = process.env\n\nexport default class PaymentService {\n    constructor() {\n        this.client = new AxiosClient()\n    }\n\n    createPaymentIntent = ({ productId, callbackSuccess, callbackError }) => {\n        const requestInfo = { url: `${REACT_APP_BASE_URL}${REACT_APP_PAYMENT_ENDPOINT}/payment-intents?id=${productId}`, callbackSuccess, callbackError }\n        this.client.makePostRequest(requestInfo)\n    }\n\n    pay = ({ body, callbackSuccess, callbackError }) => {\n        const requestInfo = { url: `${REACT_APP_BASE_URL}${REACT_APP_PAYMENT_ENDPOINT}/checkout`, body, config: getHeaders(), callbackSuccess, callbackError }\n        this.client.makePostRequest(requestInfo)\n    }\n}","export const getHeaders = () =>{\n    return {\n        headers:{\n            'Content-Type':'application/json',\n            Accept:'application/json'\n        },\n        withCredentials:true\n    }\n}\n","import React, { useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport PaymentForm from './components/PaymentForm';\nimport Wrapper from '../../components/Wrapper';\nimport styles from './Stripe.module.scss';\nimport ProductCard from './components/ProductCard';\nimport PaymentService from '../../services/paymentService';\n\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_KEY);\n\nconst Stripe = () => {\n    const [currentProduct, setCurrentProduct] = useState(null);\n    const [clientSecret,setClientSecret] = useState(null);\n\n    const mockCart = [\n        { id: 1, name: \"papas\", price: 1000 },\n        { id: 2, name: \"queso\", price: 500 },\n        { id: 3, name: \"hamburguesa\", price: 1500 },\n        { id: 4, name: \"soda\", price: 1000 },\n        { id: 5, name: \"golosinas\", price: 800 }\n    ]\n\n    useEffect(() => {\n        const getClientSecret = async () => {\n            console.log(currentProduct);\n            const service = new PaymentService();\n            service.createPaymentIntent({productId:currentProduct,callbackSuccess:callbackSuccessPaymentIntent,callbackError:callbackErrorPaymentIntent})\n        }\n        currentProduct&&getClientSecret();\n    }, [currentProduct])\n\n    const callbackSuccessPaymentIntent = (res) =>{\n        setClientSecret(res.data.payload.client_secret)\n    }\n\n    const callbackErrorPaymentIntent = err => {\n        console.log(err);\n    }\n    return (<>\n        <div className={styles.container}>\n            <h1 className={styles.title}>Stripe</h1>\n        </div>\n        <div className={classnames([styles.container, styles.highlighted])}>\n            <Wrapper hidden={currentProduct}>\n                <div className={styles.productsContainer}>\n                    {mockCart.map(product => <ProductCard key={product.id} product={product} setCurrentProduct={setCurrentProduct} />)}\n                </div>\n            </Wrapper>\n            <Wrapper hidden={!clientSecret||!stripePromise}>\n                <Elements stripe={stripePromise} options={{clientSecret:clientSecret}}>\n                    <PaymentForm/>\n                </Elements>\n            </Wrapper>\n        </div>\n    </>)\n}\n\nexport default Stripe;"],"names":["createAlertWithCallback","type","title","message","callback","Swal","icon","text","timer","showConfirmButton","then","result","stripe","useStripe","elements","useElements","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","_yield$stripe$confirm","error","wrap","_context","prev","next","preventDefault","confirmPayment","redirect","sent","paymentIntent","console","log","window","location","replace","stop","_x","apply","arguments","_jsx","_Fragment","children","_jsxs","PaymentElement","className","styles","onClick","hidden","product","setCurrentProduct","id","name","price","AxiosClient","_createClass","_classCallCheck","makeGetRequest","url","config","callbackSuccess","callbackError","axios","get","catch","makePostRequest","_ref2","body","post","makePutRequest","_ref3","put","makeDeleteRequest","_ref4","delete","REACT_APP_BASE_URL","process","REACT_APP_PAYMENT_ENDPOINT","PaymentService","_this","createPaymentIntent","productId","requestInfo","concat","client","pay","headers","Accept","withCredentials","this","stripePromise","loadStripe","_useState","useState","_useState2","_slicedToArray","currentProduct","_useState3","_useState4","clientSecret","setClientSecret","useEffect","getClientSecret","callbackSuccessPaymentIntent","callbackErrorPaymentIntent","res","data","payload","client_secret","err","classnames","Wrapper","map","ProductCard","Elements","options","PaymentForm"],"sourceRoot":""}